pkg load optim

% Параметры
a11 = 20;     a12 = 10;     a13 = 25;
a21 = 8;      a22 = 20;     a23 = 10;
b1 = 0.120;   b2 = 0.180;   b3 = 0.210;
c1 = 0.010;   c2 = 0.005;   c3 = 0.008;
d1 = 15;      d2 = 15;      d3 = 20;

% Матрица ограничений A и вектор правых частей B
A = [
    1/a11, 1/a12, 1/a13, 0, 0, 0; % Ограничение по времени станков 1-го типа (максимум 30000 часов)
    0, 0, 0, 1/a21, 1/a22, 1/a23, % Ограничение по времени станков 2-го типа (максимум 45000 часов)
    b1, b2, b3, b1, b2, b3, % Ограничение по расходу пряжи (максимум 30000 кг)
    c1, c2, c3, c1, c2, c3, % Ограничение по расходу красителей (максимум 1000 кг)
    -b1, -b2, -b3, -b1, -b2, -b3, % Условие на использование не менее 3/4 пряжи (минимум 22500 кг)
    -d1, -d2, -d3, -d1, -d2, -d3, % Условие на получение выручки (минимум 2 283 653)
];

B = [
    30000; % Ограничение по времени станков 1-го типа
    45000; % Ограничение по времени станков 2-го типа
    30000; % Ограничение по расходу пряжи
    1000;  % Ограничение по расходу красителей
    -22500; % Условие на использование не менее 3/4 пряжи
    -2283653 % Условие на получение выручки
];

% Коэффициенты целевой функции
f = [b1; b2; b3; b1; b2; b3];

% Решение задачи линейного программирования
[x, fval] = linprog(f, A, B, [], [], zeros(6, 1), []);

% Вывод результатов
disp('=== ОПТИМАЛЬНЫЙ ПЛАН ПРОИЗВОДСТВА ===');
disp('Количество метров ткани, произведенное на каждом типе станков:');
disp('На станках 1-го типа:');
fprintf('  - Ткань артикула 1: %.2f м\n', x(1));
fprintf('  - Ткань артикула 2: %.2f м\n', x(2));
fprintf('  - Ткань артикула 3: %.2f м\n', x(3));
disp('На станках 2-го типа:');
fprintf('  - Ткань артикула 1: %.2f м\n', x(4));
fprintf('  - Ткань артикула 2: %.2f м\n', x(5));
fprintf('  - Ткань артикула 3: %.2f м\n', x(6));

disp(' ');
disp('=== РАСХОД РЕСУРСОВ ===');

% Расход времени станков
time_st1 = x(1)/a11 + x(2)/a12 + x(3)/a13;
fprintf('  - Время станков 1-го типа: %.1f ч\n', time_st1);
time_st2 = x(4)/a21 + x(5)/a22 + x(6)/a23;
fprintf('  - Время станков 2-го типа: %.1f ч\n', time_st2);

% Расчет расхода красителей
dye_usage = c1 * x(1) + c2 * x(2) + c3 * x(3) + c1 * x(4) + c2 * x(5) + c3 * x(6);
fprintf('  - Расход красителей: %.2f кг\n', dye_usage);

% Расчет расхода пряжи
yarn_usage = b1 * x(1) + b2 * x(2) + b3 * x(3) + b1 * x(4) + b2 * x(5) + b3 * x(6);
fprintf('  - Расход пряжи: %.2f кг\n', yarn_usage);

% Расчет выручки
revenue = d1 * x(1) + d2 * x(2) + d3 * x(3) + d1 * x(4) + d2 * x(5) + d3 * x(6);
fprintf('  - Выручка: %.2f руб\n', revenue);

